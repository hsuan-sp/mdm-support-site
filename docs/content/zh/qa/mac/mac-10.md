---
id: mac-10
title: "Jamf Pro 預設的「資產」報告中沒有我要的資訊（如特定檔案版本、最後重開機時間），該如何自訂收集？"
category: "第七部分：Mac 裝置管理 (Mac Management)"
important: false
tags: ["延伸屬性","Extension Attributes","腳本","資產","客製化欄位"]
---

**請使用「電腦延伸屬性 (Computer Extension Attributes)」功能。**
**這是 Jamf Pro 用於擴充資料庫欄位、收集非標準硬體/軟體資訊的核心工具。**

標準的 Jamf Pro 資產檢視雖然已包含硬體規格、作業系統、應用程式清單等資訊，
但面對特殊管理需求（例如：檢查某個特定設定檔是否被竄改、電池循環次數、或是自訂的財產編號），
就需要透過「延伸屬性」來達成。 **2026 年新典範：DDM 狀態頻道 (Status Channel)** 除了傳統的「更新資產」外，macOS 26 推薦使用 DDM 狀態頻道：

- **即時性** ：裝置狀態（如 CPU 負載、磁碟空間、金鑰狀態）一旦變更，裝置會主動「報信」給 Jamf Pro，不再需要等待每週期的資產掃描。
- **低負載** ：僅回傳變更的欄位，大幅減輕伺服器負擔。
- **實務建議** ：對於需要精確掌握狀態的欄位（如安全軟體是否執行），應優先掛載 DDM 狀態頻道。

**建立步驟 (SOP)：** 1. **路徑** ：前往右上角 **「設定 (Settings)」** > **「電腦管理」** > **「延伸屬性」** 。

1. **新增** ：點選 **「+ 新增」** 。

1. **設定屬性** ：

- **顯示名稱** ：欄位名稱（例如：Last Reboot Time）。
- **輸入類型 (Input Type)** ：選擇 **「腳本 (Script)」** 。
- **資料類型** ：選擇 String (字串)、Integer (整數) 或 Date (日期)，

 這會影響後續智慧型群組的判斷邏輯（如「大於/小於」或「包含」）。

1. **撰寫腳本** ：

- 在編輯器中貼上 Shell Script。
- **關鍵語法** ：Jamf Pro 僅會讀取被 `<result>` 與 `</result>` 標籤包住的輸出值。

**任何未被標籤包住的 echo 輸出僅會出現在除錯日誌中，不會寫入資料庫。*** 實戰範例：收集「系統運作天數 (Uptime)」 ** ```bash

#!/bin/bash

## 取得系統運作時間並回傳給 Jamf Pro

## 這裡使用 awk 抓取 uptime 指令輸出的天數部分

```
days=$(uptime | awk '{ print $3 }')
echo "<result>$days</result>"
```

**進階應用場景：**

- **合規性檢查** ：撰寫腳本檢查特定資安軟體（如 CrowdStrike 或 SentinelOne）的守護程序 (Daemon) 是否運作中。

 若回傳 "Stopped"，該電腦自動落入「不合規群組」並觸發修復政策。

- **行政管理** ：將輸入類型設為 **「彈出式選單 (Pop-up Menu)」** ，

 定義如「教務處」、「學務處」、「總務處」等選項，
 讓管理員在發放裝置時手動選取歸屬單位，便於分群管理。

**實務建議：專家提示**

- **執行效能** ：延伸屬性腳本會在 **每次** 資產更新時執行。

 請避免撰寫耗時過長（如 `find / ...` 掃描全硬碟）的腳本，
 以免拖慢全校電腦的資產回報速度或造成系統卡頓。
