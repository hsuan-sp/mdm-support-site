---
id: mac-10
title: "Jamf Pro 預設的「資產」報告中沒有我要的資訊（如特定檔案版本、最後重開機時間），該如何自訂收集？"
category: "第七部分：Mac 電腦進階管理 (Mac Management)"
important: false
tags: ["延伸屬性","Extension Attributes","腳本","資產","客製化欄位"]
---

# Q: Jamf Pro 預設的「資產」報告中沒有我要的資訊（如特定檔案版本、最後重開機時間），該如何自訂收集？

# Answer

**請使用「電腦延伸屬性 (Computer Extension Attributes)」功能。**
**這是 Jamf Pro 用於擴充資料庫欄位、收集非標準硬體/軟體資訊的核心工具。**

標準的 Jamf Pro 資產檢視雖然已包含硬體規格、作業系統、應用程式清單等資訊，
但面對特殊管理需求（例如：檢查某個特定設定檔是否被竄改、電池循環次數、或是自訂的財產編號），
就需要透過「延伸屬性」來達成。

**運作原理：**
1.  管理員建立一個延伸屬性欄位，並指定資料來源（最常使用 **腳本 (Script)**）。
2.  電腦在執行 **「更新資產 (Update Inventory)」** 政策時，Jamf Binary 會一併執行這個腳本。
3.  腳本將執行結果 (Result) 回傳給 Jamf Pro 伺服器。
4.  該數值會儲存在電腦的資產紀錄中，並可用於建立 **「智慧型電腦群組 (Smart Computer Groups)」** 的自動篩選條件。

**建立步驟 (SOP)：**

1.  **路徑**：前往右上角 **「設定 (Settings)」** > **「電腦管理」** > **「延伸屬性」**。
2.  **新增**：點選 **「+ 新增」**。
3.  **設定屬性**：
    *   **顯示名稱**：欄位名稱（例如：Last Reboot Time）。
    *   **輸入類型 (Input Type)**：選擇 **「腳本 (Script)」**。
    *   **資料類型**：選擇 String (字串)、Integer (整數) 或 Date (日期)，
        這會影響後續智慧型群組的判斷邏輯（如「大於/小於」或「包含」）。
4.  **撰寫腳本**：
    *   在編輯器中貼上 Shell Script。
    *   **關鍵語法**：Jamf Pro 僅會讀取被 `<result>` 與 `</result>` 標籤包住的輸出值。
    *   *任何未被標籤包住的 echo 輸出僅會出現在除錯日誌中，不會寫入資料庫。*

**實戰範例：收集「系統運作天數 (Uptime)」**

```bash
#!/bin/bash
# 取得系統運作時間並回傳給 Jamf Pro
# 這裡使用 awk 抓取 uptime指令輸出的天數部分
days=$(uptime | awk '{ print $3 }')
echo "<result>$days</result>"
```

**進階應用場景：**
*   **合規性檢查**：撰寫腳本檢查特定資安軟體（如 CrowdStrike 或 SentinelOne）的守護程序 (Daemon) 是否運作中。
    若回傳 "Stopped"，該電腦自動落入「不合規群組」並觸發修復政策。
*   **行政管理**：將輸入類型設為 **「彈出式選單 (Pop-up Menu)」**，
    定義如「教務處」、「學務處」、「總務處」等選項，
    讓管理員在發放設備時手動選取歸屬單位，便於分群管理。

**實務建議：專家提示**
*   **執行效能**：延伸屬性腳本會在**每次**資產更新時執行。
    請避免撰寫耗時過長（如 `find / ...` 掃描全硬碟）的腳本，
    以免拖慢全校電腦的資產回報速度或造成系統卡頓。
    