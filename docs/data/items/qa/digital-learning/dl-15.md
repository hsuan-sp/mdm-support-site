---
id: dl-15
title: "全班同時更新 iPadOS 會導致校網崩潰或塞車，有什麼標準解法？(內容快取)"
category: "第五部分：數位學習精進方案專區 (MOE Digital Learning Project)"
important: false
tags: ["內容快取","Content Caching","頻寬最佳化","VLAN","mDNS Relay","macOS"]
---

## Q: 全班同時更新 iPadOS 會導致校網崩潰或塞車，有什麼標準解法？(內容快取)

## Answer

**針對高密度 Wi-Fi 學校，架設 macOS 的「內容快取 (Content Caching)」是解決頻寬瓶頸的關鍵，**
**但實作上必須解決跨網段 (VLAN) 的通訊阻礙。**

利用學校現有的 Mac (如電腦教室 iMac 或 Mac mini) 作為快取伺服器，
可以讓第一台 iPad 下載更新後，後續數十台裝置直接透過區網 (LAN) 極速抓取檔案。
然而，校園網路架構經常將「有線網路 (Mac 所在)」與「無線網路 (iPad 所在)」切割為不同的邏輯網段 (VLAN)，
導致 iPad 透過 mDNS 廣播時找不到這台快取伺服器。

**標準架設步驟**：

1. **硬體需求**：建議使用配備 Apple 晶片 (M1-M5) 的 Mac，並安裝 **macOS 15 (Sequoia)** 或更新版本。

1. **開啟服務**：前往 **「系統設定」>「一般」>「共享」**，勾選 **「內容快取」**。待狀態顯示為 **綠燈** 即代表服務運作中。

**跨網段探索的三種解決方案 (依操作難易度排序)**：

**方案一：Mac 連接學生 Wi-Fi (最簡單、老師可自助)**

若您無法請求網管更改設定，這是最快的「緊急解決方案」。

* **操作方式**：讓這台 Mac **同時開啟 Wi-Fi**，並連線到與學生平板相同的 SSID

 (例如 `TANet-Roaming` 或學校專用 SSID)。

* **原理**：讓 Mac 與 iPad 處於同一個無線網段內，直接打通 mDNS 發現路徑。

* **缺點**：雖然能通，但 Mac 透過 Wi-Fi 分發快取資料時會佔用無線頻寬 (Airtime)，

 效能不如有線網路穩定，但在無法更改網路架構時，這是唯一解法。

**方案二：設定 mDNS Relay / Bonjour Gateway (網管層級最佳解)**

這是不更動線路架構下的最佳正規解法。

* **操作方式**：請網管人員在核心交換器 (L3 Switch) 或防火牆 (如 Fortinet/Aruba) 上

 開啟 **mDNS Relay** 或 **Bonjour Gateway** 功能。

* **設定重點**：設定規則允許 **UDP Port 5353** 的封包在「有線網段 VLAN」與「無線網段 VLAN」之間轉發。

 一旦打通，iPad 即可跨網段發現有線網路上的 Mac。

**方案三：設定 DNS TXT 紀錄 (進階正規解)**

這是 Apple 官方推薦的標準做法，但依賴學校對 DNS 的控制權。

* **限制**：許多中小學使用教網中心 DNS，無權限自行修改。

* **操作方式**：若貴校有自管的 Internal DNS，

 請新增一筆 `_aaplcache._tcp` 的 **TXT Record**，內容指向該 Mac 的 IP 位址。

**如何驗證運作狀態？**

1. 在 Mac 上開啟 **「活動監視器 (Activity Monitor)」**。

1. 按下 `Command + 2` 或點選選單列的 **「快取 (Cache)」** 分頁。

1. 當 iPad 開始下載更新時，觀察 **「來自快取的資料 (Data served from cache)」** 數值是否顯著增加。

**實務建議**：

請務必在 Mac 的「顯示器」或「能源節約」設定中，開啟 **「防止電腦在顯示器關閉時自動休眠」**。
若 Mac 進入休眠模式，快取服務將可能中斷，導致 iPad 轉而向外網下載，再次塞爆頻寬。
